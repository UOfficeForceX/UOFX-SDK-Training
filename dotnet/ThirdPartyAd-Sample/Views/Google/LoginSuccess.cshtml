@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@using System.Text.Json;
@{
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Success</title>
</head>
<body>
    <h1>登入成功</h1>
    <script>

        //這是給 app 使用的 Postback function
        function Postback() {
            var model = @Html.Raw(Model);
            return model;
        }

        //判斷是透過 web 或 app 連線
        if (window.opener) {
            //如果是 web 則使用 postMessage 回傳資料去 UOF X
            var model = @Html.Raw(Model);
            window.opener.postMessage(model, '*');
            window.close();
        }else{
            //如果是 app 則使用約定的 Postback function 回傳資料
            Postback();
        }

    </script>
</body>
</html>